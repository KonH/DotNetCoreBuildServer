{
	"args": [
		"tag"	
	],
	"tasks": [
		{
			"validate_project_root": {
				"check_dir_exist": {
					"path": "{root}",
					"size_more": "1"
				}
			}
		},
		{
			"clean_repo": {
				"run": {
					"path": "git",
					"args": "reset --hard",
					"work_dir": "{root}/git_repo",
					"error_filter": "error"
				}
			}
		},
		{
			"fetch_last_repo": {
				"run": {
					"path": "git",
					"args": "fetch --all",
					"work_dir": "{root}/git_repo",
					"error_filter": "error"
				}
			}
		},
		{
			"checkout_to_commit": {
				"run": {
					"path": "git",
					"args": "checkout {tag}",
					"work_dir": "{root}/git_repo",
					"error_filter": "error"
				}
			}
		},
		{
			"validate_sources": {
				"check_file_exist": {
					"path": "{root}/git_repo/sources.txt"
				}
			}
		},
		{
			"clean_project": {
				"delete_file": {
					"path": "{root}/build.txt",
					"if_exist": "true"
				}
			}
		},
		{
			"show_project_root": {
				"run": {
					"path": "ls",
					"args": "{root}"
				}
			}
		},
		{
			"make_build": {
				"run": {
					"path": "{root}/git_repo/run.sh",
					"work_dir": "{root}/git_repo",
					"log_file": "{root}/build_log.txt"
				}
			}
		},
		{
			"validate_build": {
				"check_file_exist": {
					"path": "{root}/build.txt",
					"size_more": "1"
				}
			}
		},
		{
			"clean_upload": {
				"run": {
					"path": "svn",
					"args": "cleanup",
					"work_dir": "{root}/local_svn",
					"error_filter": "error"
				}
			}
		},
		{
			"update_upload": {
				"run": {
					"path": "svn",
					"args": "update",
					"work_dir": "{root}/local_svn",
					"error_filter": "error"
				}
			}
		},
		{
			"copy_to_upload": {
				"copy_file": {
					"from": "{root}/build.txt",
					"to": "{root}/local_svn"
				}
			}
		},
		{
			"add_build": {
				"run": {
					"path": "svn",
					"args": "add . --force",
					"work_dir": "{root}/local_svn",
					"error_filter": "error"
				}
			}
		},
		{
			"upload_build": {
				"run": {
					"path": "svn",
					"args": "commit -m \"Build for {tag}.\"",
					"work_dir": "{root}/local_svn",
					"error_filter": "error;Commit failed",
					"log_file": "{root}/upload_log.txt"
				}
			}
		}
	]
}